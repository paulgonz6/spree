<%= render :partial => "spree/admin/variants/autocomplete", :formats => :js %>

<% content_for :page_title do %>
  <%= Spree.t(:manage_stock) %>
<% end %>

<% content_for :table_filter_title do %>
  <%= Spree.t(:search) %>
<% end %>

<% content_for :table_filter do %>
  <div data-hook="admin_orders_index_search">
    <%= form_for :variant_search, url: admin_stock_items_path, method: :get do |f| %>
      <div class="field-block alpha four columns">
        <div class="field">
          <%= label_tag nil, Spree.t(:stock_location) %>
          <%= select_tag :stock_location_id, options_from_collection_for_select(@stock_locations, :id, :name, params[:stock_location_id]), { :include_blank => true, :class => 'select2 fullwidth', "data-placeholder" => Spree.t(:select_a_stock_location) } %>
        </div>
      </div>
      <div data-hook="add_product_name" class="field twelve columns alpha">
        <%= label_tag :add_variant_id, Spree.t(:variant) %>
        <%= text_field_tag :variant_search_term, params[:variant_search_term], :class => "fullwidth", :placeholder => Spree.t(:variant_search_placeholder) %>
      </div>

      <div class="clearfix"></div>

      <div class="actions filter-actions">
        <div data-hook="admin_orders_index_search_buttons">
          <%= button Spree.t(:filter_results), 'search' %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

<% if @variants.any? %>
  <%= paginate @variants %>

  <%= render :partial => 'spree/admin/shared/stock_management', :locals => { :variants => @variants } %>

  <%= paginate @variants %>
<% else %>
  <div class="fullwidth no-objects-found">
    <%= Spree.t(:no_variants_found) %>
    <br/>
    <%= Spree.t(:try_changing_search_values) %>
  </div>
<% end %>